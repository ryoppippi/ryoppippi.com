---
title: "【祝 1K Star 達成】ccusageの３週間を振り返る"
date: '2025-06-18'
isPublished: true
lang: 'ja'
---

> [!NOTE]
> ![not by AI](./zenn-shared/Written-By-Human-Not-By-AI-Badge-white.png)
> _[not by AI](https://notbyai.fyi)_

> [!NOTE]
> I'll write this article in English later, please wait for a while.

# TL;DR

- [`ccusage`](https://www.raycast.com/nyatinte/ccusage)が1K Starを達成しました！
- 20日間で44回のリリース、24,000超のダウンロード
- Claude Codeの破壊的変更を乗り越えて成長
- コミュニティの力でGUIラッパーやRaycast拡張機能も誕生

> [!NOTE]
> 継続的な開発を支援してくださる方は、ぜひGitHub Sponsorsでのサポートをお願いします！
> IssueやPRが多く寄せられ、開発が活発になっています。
> 開発のモチベーションにもなりますので、ぜひご支援ください。
> ワンタイム、ワンコインからぜひご検討ください！
>
> https://github.com/sponsors/ryoppippi
>
> スポンサーしていただいている方々にはとても感謝しています。ありがとうございます！
>
> [![spnosors](https://cdn.jsdelivr.net/gh/ryoppippi/sponsors/sponsors.circles.svg)](https://github.com/ryoppippi/sponsors)

# はじめに

先月、[`ccusage`](https://www.raycast.com/nyatinte/ccusage)をリリースし、記事を書きました。

/blog/2025-05-29-6c9a8fe6629cd6-ja

この記事をまとめると

- 5/28の午後に[@milliondev](https://note.com/milliondev)さんの[記事](https://note.com/milliondev/n/n1d018da2d769)を見かけた
- その日のうちにClaude Codeを使ってCLIツールにし、npm に publishした

この20日間は私にとっても`ccusage`にとっても色々な出来事がありました。
軽く振り返ってみたいと思います。

# SNS で振り返る`ccusage`

https://x.com/ryoppippi/status/1934170281842778485

以前の記事で、「ハッシュタグ`#ccusage`をつけてツイートしてください！」と呼びかけましたが、現在では毎日のように`#ccusage`のハッシュタグをつけてツイートしてくださる方が増えています。

https://x.com/search?q=%23ccusage

「今日はいくら使ったよ！」「Maxプランの元を取ったぞ！」「ccusage便利！」などのツイートを見かけると、とても嬉しくなります。

また海外でも`ccusage`を使ってくださる方が増えてきており、英語でのツイートも増えています。
(もはや最近のcontributorは95%が海外の方です。まあ私もUKに住んでいるので海外勢なんですけどね)

`ccusage`を作ったその日にredditに投稿したこちらのスレッドは62K Views、124 Upvotesで盛り上がりました。
https://www.reddit.com/r/ClaudeAI/comments/1kyy223/i_made_a_cli_tool_to_see_how_much_im_saving_with/

また最近のredditのスレッドを見ると、カバー画像が`ccusage`のスクショを使ってくださっている方が多いです。

さらに、redditのClaudeコミュニティのメンテナの方が作られているClaude Code虎の巻サイトにて`ccusage`をピックアップしていただいてます。

https://claudelog.com/addons/cc-usage/

# 数字で振り返る`ccusage`

- この20日間でのリリース数: 44
- GitHub Star数: [1,034 (2025/06/18 23:00 BST 時点)](https://github.com/ryoppippi/ccusage/stargazers)
- npm総ダウンロード数: [24,378 (2025/06/18 23:00 BST 時点)](https://npm-stat.com/charts.html?package=ccusage&from=2025-05-27)

[![Star History Chart](https://api.star-history.com/svg?repos=ryoppippi/ccusage&type=Date)](https://www.star-history.com/#ryoppippi/ccusage&Date)

自分自身のOSS史上、初めて1K Starを達成しました。嬉しいです。ありがとうございます。
(2位は [sitemcp](https://github.com/ryoppippi/sitemcp) の 608 Star です！)

## エコシステムで振り返る`ccusage`

`ccusage`のGUIラッパーを作ってくださる方も増えてきました。

https://x.com/penicillin0at/status/1929228168507818377

https://x.com/m_sigepon/status/1930644623678165267

そんな中、なんと [@nyatinte](https://github.com/nyatinte)さんが Raycast Extension を作ってくださり、なんとストアの審査を通過しました！やばすぎ！

https://github.com/raycast/extensions/pull/19792

https://www.raycast.com/nyatinte/ccusage

https://x.com/nyatinte/status/1933206440711438489

こちら、私も早速インストールして使っています。メニューバーから簡単に使用状況を確認できるのでとても便利です。

また、この拡張機能のためにデザインしていただいたロゴを `ccusage` の公式ロゴとして使わせていただくことになりました。ありがたい！かわいい！

![ccusage-logo](https://cdn.jsdelivr.net/gh/ryoppippi/ccusage@fbcc21d/docs/logo.svg)

# リリースで振り返る`ccusage`

ここからは`ccusage`のリリース履歴を振り返ります。

これまでに行われたリリースの数は44回。気がついたらすごい勢いでリリースが行われていました。
また、サブコマンド、オプション、機能が予想以上に増えていてびっくりしています。
詳細は[README](https://github.com/ryoppippi/ccusage/blob/main/README.md)や[Release](https://github.com/ryoppippi/ccusage/releases/)をご覧ください。

## Claude Codeの破壊的変更

`ccusage`のリリースから数日後、Claude Codeに破壊的な変更がありました。
なんと、ログに記載されていた`costUSD`が削除されてしまったのです。

https://github.com/ryoppippi/ccusage/issues/4

いきなり大波乱...
この変更により、`ccusage`はコストを計算することができなくなりました。

ただ、使用したtokenの数はまだログに残っていました。そのため、以下の実装の変更をしました。

- もし`costUSD`が存在すればそれを使用(Claude Code 1.0.8以前)
- 存在しなければ、token数からコストを計算する（Claude Code 1.0.9以降）

コストの計算には[`LiteLLM`](https://github.com/BerriAI/litellm/blob/main/model_prices_and_context_window.json) がGitHubに公開している価格データを使用しています。

`ccusage`を起動すると、GitHubから価格データをダウンロードし、使用したtokenとつき合わせてコストを計算します。

https://github.com/ryoppippi/ccusage/pull/5

このissueが発覚してからリリースまで僅か1日足らず、問題に気がついてから睡眠を取ったので実質４時間程度でプロトタイピングとユーザのfeedbackの検証、改善を終わらせました。Claude Code自身の助けもあり、迅速に対応できました。
正直「えっ、マジで？」って感じでしたが、ユーザーの皆さんが困っているのを見て、なんとかしなきゃという思いで対応しました。

## MCP (Model Context Protocol) の導入

`v0.5.0`でMCP (Model Context Protocol)を導入しました。

https://github.com/ryoppippi/ccusage/releases/tag/v0.5.0

![mcp-claude-desktop](https://cdn.jsdelivr.net/gh/ryoppippi/ccusage@main/docs/mcp-claude-desktop.avif)

この頃から `ccusage` を開発のワークフローに取り込む事例を見かけるようになりました。 また、ちらほらと `ccusage`のGUIラッパーが出てきました。私としてはGUIの開発にはコストを割きたいとは思わず、あくまでもCLIツールとしての柔軟性を保ちたいと考えています。MCP経由で情報を取得できることで、Claude CodeはもちろんClaude Desktopや他のMCP対応アプリケーションからも使用状況を取得できるようになりました。

## サブコマンドの追加

`v0.6.0`で月次使用状況レポートコマンドを追加しました。

https://github.com/ryoppippi/ccusage/releases/tag/v0.6.0

これにより今月いくら使ったんだろう、を簡単に確認できるようになりました。
この頃から外部のcontributorの方々からのPRが増え始めました。

## モデル別の使用状況

`v0.7.0`で使用状況レポートにモデル内訳と使用詳細を追加しました。

https://github.com/ryoppippi/ccusage/releases/tag/v0.7.0

https://github.com/ryoppippi/ccusage/pull/52

この頃からClaude Codeのモデルへの制限が初期とは異なり厳しくなってきたこともあり、モデルごとに使用状況を確認したいという要望が多く寄せられました。
これも外部のcontributorの方々からのPRで実装されました。

## 計算ロジックの改善

`v0.8.0`で重複カウント問題の修正を行いました。

https://github.com/ryoppippi/ccusage/releases/tag/v0.8.0

それまでの自前の実装では、ナイーブに使用したtoken数を足し合わせていました。しかし、Claude Codeの会話が分岐した場合、同じトークンが複数回カウントされてしまう問題がありました。これにより、実際のコストよりも最大で1.5倍ほど高くなってしまうことがありました。
これは私自身は全く認識していなかった問題です。
外部のcontributorの方々からのPRで、分岐した会話の時系列重複排除を実装しました。これにより、より正確なコスト計算が可能になりました。
`v0.7.0`よりも見かけ上のコストが下がってしまうので少し寂しいですが、実際のコストはより正確に計算されるようになりました。

この後数日間はだいぶバグ修正が主なリリースになりました。

## ５時間ブロック機能の導入

`v10.0.0`で5時間ブロック機能を導入しました。

https://github.com/ryoppippi/ccusage/releases/tag/v10.0.0
https://github.com/ryoppippi/ccusage/issues/23

Claude Codeには５時間のセッションという概念があります。これは、Claude Codeは５時間のスプリントで使用状況を管理、制限をかけていることを意味します。
Claude Codeを使っていると、度々使用限度に引っかかり、あと1時間待ちましょう、というメッセージが表示されることがあります。制限に引っかからないためにも、今のセッションでどのくらいのtokenを使用しているのかを把握することが重要です。
`npx ccusage@latest blocks`コマンドを実行することで、現在のセッションの使用状況を確認できます。とても便利です。

その後はMCP serverを `fastmcp` から `Hono` へ移行してバンドルサイズを2.21MBから最終的に924KBまで削減する、valibotからzodへの移行、brand型を用いた開発時の型安全の向上、などのリファクタリングを行いました。

## ロゴの追加

`v13,0.0`より、 [@nyatinte](https://github.com/nyatinte)さんのロゴを公式ロゴとして採用しました！

# 今後の展望

`ccusage`の機能開発は一旦落ち着いたと考えています。現在立っているissueは0ですし、一通りユーザが必要とする機能は実装されていると考えています。
ただ、`ccusage`のログを読む機能は非公式なものであり、今後の破壊的変更で動かなくなる可能性はいくらでもあると思います。
`ccusage`が有用である限り、破壊的変更があった場合は迅速に対応していきたいと考えています。

# 今後のryoppippiのOSS開発の展望

ちょうど前職を退職したタイミングだったので、今週は特に`ccusage`にフルタイムで取り組んでいました。ただ、機能開発が一旦落ち着いたので、今後は別の観点でClaude CodeやVibe Coding向けのツールを開発していく予定です。アイデアは今10数個あるんですよね。
正直 Vibe Coding でいくらでも開発はできると思います。ただOSSなのでメンテナンスやcontributorの方々とのコミュニケーションが結構大変です。でも、そこから得られるものは計り知れません。今後もOSS開発は続けていきたいと考えています。

そのためにも、できればGitHub Sponsorsでのサポートをお願いします!!!

# まとめ

`ccusage`はリリースから20日間で1K Starを達成し、多くの方に使っていただいています。これもひとえにコミュニティの皆様のおかげです。ありがとうございます。
正直な話、「いくら元を取れているか確認してニヤニヤするためのツール」として作ったのに、ここまで盛り上がるとは予想しておらず、若干困惑しているところもありますが、私の開発したOSSがここまで話題になりここまで多くの方に使っていただけていることはとても嬉しいです。
Vibe Coding アンチだった 1 ヶ月前の自分、見てるか？
これからも`ccusage`をはじめ、Vibe Coding向けのツールを開発していきたいと考えています。

正直ここまで盛り上がっていただけるとは思っていませんでした。
スポンサーの方々、contributorの方々、そして`ccusage`ユーザの皆様、本当にありがとうございます。
引き続き `ccusage` と新ツール群をよろしくお願いします 🙌
