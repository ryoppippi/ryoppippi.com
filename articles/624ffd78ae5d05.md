---
title: "Turborepoã®Cacheã‚’Github Actionsã§ä½¿ã†ã€ç„¡æ–™ã§"
emoji: "ğŸ¦”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["turborepo", "github", "githubactions"]
published: true
---

# TL;DR

- [dtinth/setup-github-actions-caching-for-turbo](https://github.com/dtinth/setup-github-actions-caching-for-turbo)ã‚’ä½¿ãŠã†

# ã¯ã˜ã‚ã«

Turborepo ã¯ Vercel ãŒé–‹ç™ºã—ãŸãƒ¢ãƒãƒ¬ãƒç’°å¢ƒç”¨ã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

https://turborepo.org/docs/getting-started

Turborepo ã«ã¯ã€ãƒ¢ãƒãƒ¬ãƒç’°å¢ƒã§ã®ãƒ“ãƒ«ãƒ‰ã‚’é«˜é€ŸåŒ–ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã€Remote Caching ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚

https://turbo.build/repo/docs/core-concepts/remote-caching

ã“ã‚Œã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒåŠ¹ãã‚ˆã†ã«ãªã‚Šã€CI ãŒçˆ†é€Ÿã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã—ã‹ã—ã€ã“ã®æ©Ÿèƒ½ã‚’ä½¿ãŠã†ã¨ã™ã‚‹ã¨ Vercel ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚
å€‹äººåˆ©ç”¨(Hobby)ã§ã¯ç„¡æ–™ã§ã™ãŒã€ä¼šç¤¾(Pro)ã§ä½¿ã†ã¨ã™ã‚‹ã¨ $20 per user / month ã¨ã„ã†ä¾¡æ ¼ã«ãªã‚Šã¾ã™
ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ã ã‘ãªã‚‰ã¾ã‚ã¾ã‚é«˜ã„ã§ã™ã­ã€‚

# Self-hosted Cache Server

è§£æ±ºç­–ã¨ã—ã¦ã¯ã€Cache Server ã‚’è‡ªå‰ã§å»ºã¦ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã¯å…¬å¼ã«ã‚‚è¨˜è¿°ãŒã‚ã‚Šã¾ã™ã€‚
https://turbo.build/repo/docs/core-concepts/remote-caching#custom-remote-caches

ã¾ãŸã€ã“ã‚Œã‚’è©¦ã—ãŸè¨˜äº‹ã‚‚æ—¢ã«ã‚ã‚Šã¾ã™ã€‚
https://zenn.dev/silverbirder/articles/af8bf125bd33ad
https://zenn.dev/aiji42/articles/7bc1b6df91dd76

ã—ã‹ã—ã€ã‚µãƒ¼ãƒãƒ¼ã‚’åˆ¥ã§å»ºã¦ã‚‹ã®ã¯é¢å€’ã§ã™ã—ã€ãŠé‡‘ã‚‚ã‹ã‹ã‚Šã¾ã™ã€‚

# Github Actions ã§ Cache Server ã‚’è‡ªå‹•çš„ã«å»ºã¦ã‚‹

ãã“ã§ã€å†’é ­ã§ç´¹ä»‹ã—ãŸ Action ã‚’å°å…¥ã—ã¾ã™(ã¯ã„ãã“ã€Star ãŒå°‘ãªã„ã‹ã‚‰ä¸å®‰ã¨ã‹è¨€ã‚ãªã„)ã€‚

https://github.com/dtinth/setup-github-actions-caching-for-turbo

ã“ã‚Œã‚’ä½¿ã†ã¨ã€Github Actions ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã«ã€è‡ªå‹•çš„ã« Cache Server ã‚’å»ºã¦ã¦ãã‚Œã¾ã™ã€‚
ã¾ãŸã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯ Github Actions ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜ã•ã‚Œã‚‹ã®ã§ã€ï¼ˆåŒã˜ãƒ–ãƒ©ãƒ³ãƒã® CI ãªã‚‰ã°ï¼‰æ¬¡å›ä»¥é™ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ã„å›ã™ã“ã¨ã§çˆ†é€Ÿã§ CI ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
ã‚„ã£ãŸã­!

```yml
on:
  - push
  - pull_request

permissions: read-all

jobs:
  ci:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Launch Turbo Remote Cache Server
        uses: dtinth/setup-github-actions-caching-for-turbo@v1.1.0

      - name: Install pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 8

      - name: Install Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18
          cache: "pnpm"

      - name: Install dependencies
        run: pnpm i

      - name: Lint
        run: pnpm run lint

      - name: Build
        run: pnpm run build
```

# ã¡ãªã¿ã«

â†“ åˆ¥ã® Action ã‚‚ã‚ã‚Šã¾ã—ãŸãŒã€ãªãœã‹è‡ªåˆ†ã®ç’°å¢ƒã§ã¯å‹•ã‹ãªã‹ã£ãŸã®ã¨ã€ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ä¸Šã® Action ã‚’ç”¨ã„ã‚‹æ–¹ãŒæ¥½ã ã¨æ€ã„ã¾ã™ã€‚
https://github.com/felixmosh/turborepo-gh-artifacts

# ãŠã‚ã‚Šã«

Have a nice Turbo Life!
