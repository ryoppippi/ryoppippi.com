---
title: "Raspberry Pi Picoã§Lãƒã‚«ã‚’Zigã§ã‚„ã£ã¦ã¿ãŸ(ãã—ã¦ã‚ã¾ã‚Šã®ãƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚ºã®å°ã•ã•ã«é©šãã‚’éš ã›ãªã„)"
emoji: "ğŸš¨"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["zig", "raspberrypi", "raspberrypipico", "çµ„ã¿è¾¼ã¿"]
published: true
---

# ã¯ã˜ã‚ã«
æœ€è¿‘Raspberry Pi Picoã‚’è²·ã„ã¾ã—ãŸã€‚
ãã“ã§ã€Zigã§Lãƒã‚«ã™ã‚‹æ‰‹é †ã‚’æ›¸ã„ã¦ãŠãã¾ã™ã€‚

https://www.switch-science.com/catalog/6900/

# PCã¨ãƒ©ã‚ºãƒ‘ã‚¤ã‚’æ¥ç¶šã™ã‚‹
ãƒ©ã‚ºãƒ‘ã‚¤ä¸Šã«BOOTSELãŒã¤ã„ã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚’æŠ¼ã—ãªãŒã‚‰USBæ¥ç¶šã—ã¾ã™ã€‚
ã™ã‚‹ã¨ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ã—ã¦èªè­˜ã•ã‚Œã¾ã™ã€‚
ã“ã“ã«uf2ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã“ã¨ã§ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

![](/images/rspipicozig_finder.png)

# MicroZigã‚’ä½¿ã†
MicroZigã¯çµ„ã¿è¾¼ã¿ã«Zigã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

https://github.com/ZigEmbeddedGroup/microzig

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯*ZigEmbeddedGroup*ã¨ã„ã†ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«ã‚ˆã£ã¦ãƒ¡ãƒ³ãƒ†ã€é–‹ç™ºãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚

ä»Šå›ã¯ã“ã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒæä¾›ã—ã¦ã„ã‚‹ä»¥ä¸‹ã®äºŒã¤ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ä½¿ã„ã¾ã™ã€‚

1. ZigEmbeddedGroup/rp2040 - ãƒ©ã‚ºãƒ‘ã‚¤Picoã«æœ€é©åŒ–ã•ã‚ŒãŸMicroZig

https://github.com/ZigEmbeddedGroup/rp2040

2. ZigEmbeddedGroup/uf2 - elfã‹ã‚‰UF2ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ãã‚Œã‚‹

https://github.com/ZigEmbeddedGroup/uf2

# ãƒ“ãƒ«ãƒ‰ã—ã‚ˆã†
ä»Šå›ã¯ä¸Šã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’å«ã‚“ã ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¾ã—ãŸã€‚

https://github.com/ryoppippi/zig-raspberrypi-pico



ã‚³ãƒ¼ãƒ‰ã‚‚ä»¥ä¸‹ã«è¼‰ã›ã¦ãŠãã¾ã™ã€‚ã¨ã¦ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§ã™ã€‚

```zig
const microzig = @import("microzig");
const rp2040 = microzig.hal;
const gpio = rp2040.gpio;
const time = rp2040.time;

const led = 25;

pub fn main() void {
    gpio.reset();

    gpio.setFunction(led, .sio);

    gpio.setDir(led, .out);

    while (true) {
        gpio.toggle(led);
        time.sleepMs(1000);
    }
}
```

ä¸Šã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦buildã™ã‚‹ã¨ã€`zig-out/bin`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«uf2ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚
ã“ã‚Œã‚’å…ˆã»ã©ç´¹ä»‹ã—ãŸãƒã‚¦ãƒ³ãƒˆã•ã‚ŒãŸãƒ©ã‚ºãƒ‘ã‚¤ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨å‹•ãã¾ã™ã€‚

![](/images/rspipicozig-finder-copy.png)
*uf2ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹*

![](/images/rspipicozig.gif)
*ãƒã‚«ãƒã‚«*

# ãƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚º
æœ€ã‚‚é©šæ„•ã—ãŸã®ã¯ç”Ÿæˆã•ã‚Œã‚‹ãƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚ºã®å¤§ãã•ã§ã™ã€‚
å‚è€ƒã¾ã§ã«ã€ã„ã‚ã„ã‚ãªLãƒã‚«ã¨æ¯”è¼ƒã—ã¦ã¿ã¾ã—ãŸã€‚

| è¨€èª | ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰ | ã‚µã‚¤ã‚º |
| --- | --- | --- |
| Zig | zig build | 32KB |
| Zig | zig build -Drelease-small=true | **3.2KB** |
| Zig | zig build -Drelease-safe=true | 5.1KB |
| TinyGo[^1]| tinygo build -target pico -o main.uf2 main.go | 17KB |
| C [^2]| mkdir build && cd build && cmake .. && make | 26KB |
| MicroPython [^3] | -- | 614KB + 1KB |

[^1]: https://zenn.dev/mattn/articles/453893e3fde4b1
[^2]: https://github.com/raspberrypi/pico-examples/blob/master/blink/blink.c
[^3]: https://www.raspberrypi.com/documentation/microcontrollers/micropython.html

::::details TinyGoã§ã®å®Ÿè£…

```go 
package main

import (
	"machine"
	"time"
)

func main() {
	led := machine.LED
	led.Configure(machine.PinConfig{
		Mode: machine.PinOutput,
	})
	for {
		led.Low()
		time.Sleep(time.Second)
		led.High()
		time.Sleep(time.Second)
	}
}
```

::::

::::details MicroPythonã§ã®å®Ÿè£…

```python
import machine
import utime
led = machine.Pin(25, machine.Pin.OUT)
while True:
    led.value(1)
    utime.sleep(1)
    led.value(0)
    utime.sleep(1)
```

::::

ä»¥å‰ã‹ã‚‰Zigã§åãå‡ºã•ã‚Œã‚‹ãƒã‚¤ãƒŠãƒªãŒã¨ã¦ã‚‚å°ã•ã„ã¨ä¸€éƒ¨ç•Œéšˆã§ã¯è©±é¡Œã«ãªã£ã¦ã„ã¾ã—ãŸãŒã€ä»Šå›æ”¹ã‚ã¦ãã®å°ã•ã•ã«é©šãã¾ã—ãŸã€‚

# çµ‚ã‚ã‚Šã«
Zigã¯çµ„ã¿è¾¼ã¿ã«ã‚‚ã„ã„æ„Ÿã˜ã«ä½¿ãˆãã†ã§ã™ã€‚
ä»Šå¾Œã®ç™ºå±•ã«ã‚‚æœŸå¾…ã§ã™ã­ã€‚

